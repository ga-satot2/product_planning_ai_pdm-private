# 機能ギャップ分析 - 法務研修LMS

**プロジェクト**: 法務研修LMSシステム  
**作成日**: 2025-11-14  
**最終更新**: 2025-11-14  
**分析対象**: PRD要求機能 vs 現状システム（Google Drive）vs プロトタイプ（src/）

---

## 📊 機能比較マトリクス

| 機能カテゴリ | PRD要求 | 現状システム（Google Drive） | プロトタイプ（src/） | ギャップ |
|------------|---------|---------------------------|-------------------|---------|
| **1. 研修管理** | ✅ | ✅ | ✅ | なし |
| **2. 予約管理** | ✅ | ✅ | ⚠️ 一部 | 予約変更機能 |
| **3. 出席管理** | ✅ | ❌ | ❌ | **完全未実装** |
| **4. テスト・採点** | ✅ | ❌ | ❌ | **完全未実装** |
| **5. 補講管理** | ✅ | ❌ | ❌ | **完全未実装** |
| **6. 通知機能** | ✅ | ⚠️ 一部 | ❌ | メール通知 |
| **7. 管理ダッシュボード** | ✅ | ⚠️ 一部 | ⚠️ 一部 | Webアプリ版 |

---

## 🔍 詳細な機能ギャップ分析

### ✅ 実装済み機能

#### 1. 研修管理機能
- ✅ 研修コース作成・編集（スプレッドシート）
- ✅ 3グループへの振り分け
- ✅ 受講者リスト管理（CSVインポート対応）
- ✅ セッションスケジュール設定

#### 2. 予約管理機能（基本）
- ✅ 参加希望日の予約（Google フォーム）
- ✅ Google Calendar自動連携
- ✅ 予約状況の管理（参加情報シート）
- ✅ グループ別予約フォーム

#### 3. 通知機能（一部）
- ✅ Slackリマインド通知（未予約者向け）
- ✅ カレンダー招待メール（Google Calendar自動）

---

## ❌ 不足している機能

### 🔴 高優先度（PRD必須機能）

#### 1. 予約変更機能
**現状**: 予約変更機能が未実装

**要求仕様**:
- 3日前まで予約変更可能
- 1回まで変更可能
- 変更履歴の記録

**現状システム**:
- 予約変更機能なし
- 手動での対応が必要

**プロトタイプ**:
- `handleCancelReservation()` は実装済み
- 予約変更UIが未実装
- 3日前制限・1回制限のチェックが未実装

**実装が必要な項目**:
- [ ] 予約変更画面の実装
- [ ] 変更可能期間のチェック（3日前まで）
- [ ] 変更回数のチェック（1回まで）
- [ ] 変更履歴の記録
- [ ] カレンダーイベントの更新
- [ ] 待機リストへの自動移動

#### 2. 出席管理機能
**現状**: テスト回答による出席確認が未実装

**要求仕様**:
- テスト回答による自動出席確認
- 出席状況のリアルタイム把握
- 出席率レポート自動生成

**現状システム**:
- カレンダーゲストリストから出席を推測
- テスト回答による出席確認なし

**実装が必要な項目**:
- [ ] テスト回答フォームの作成
- [ ] テスト回答と予約の紐付け
- [ ] 出席状況の自動更新
- [ ] 出席率レポート生成機能

#### 3. テスト・採点機能
**現状**: テスト機能が完全に未実装

**要求仕様**:
- オンラインテスト実施
- 自動採点機能（客観式問題）
- 手動採点機能（記述式問題）
- 合格/不合格判定の自動化

**実装が必要な項目**:
- [ ] テスト問題の作成・管理機能
- [ ] テスト受験画面の実装
- [ ] 自動採点ロジック（選択式・正誤式）
- [ ] 手動採点画面（記述式）
- [ ] 合格基準の設定
- [ ] 合格/不合格の自動判定
- [ ] テスト結果の保存・表示

#### 4. 補講管理機能
**現状**: 補講管理機能が完全に未実装

**要求仕様**:
- 未受講者の自動抽出
- 不合格者の自動抽出
- 補講スケジュール調整
- 再テスト機能

**実装が必要な項目**:
- [ ] 未受講者の抽出ロジック
- [ ] 不合格者の抽出ロジック
- [ ] 補講スケジュール作成機能
- [ ] 補講予約フォーム
- [ ] 再テスト機能
- [ ] 補講対象者の通知

#### 5. メール通知機能
**現状**: Slack通知はあるが、メール通知が未実装

**要求仕様**:
- 予約確認メール（自動送信）
- リマインド通知（研修3日前、1日前）
- 結果通知（テスト完了後即座）
- 補講案内（対象者のみ）

**現状システム**:
- Slackリマインドのみ
- メール通知なし

**実装が必要な項目**:
- [ ] Gmail API統合
- [ ] 予約確認メール送信
- [ ] リマインドメール送信（3日前、1日前）
- [ ] テスト結果通知メール
- [ ] 補講案内メール
- [ ] メールテンプレートの作成

#### 6. 管理ダッシュボード（Webアプリ版）
**現状**: スプレッドシートのダッシュボードはあるが、Webアプリ版が未実装

**要求仕様**:
- 全体進捗の可視化
- グループ別進捗確認
- 出席率・合格率の統計表示
- レポート自動生成（週次・月次）

**現状システム**:
- スプレッドシートのダッシュボードシート
- Webアプリ版なし

**プロトタイプ**:
- `admin.html` は存在するが、統計表示が未実装

**実装が必要な項目**:
- [ ] ダッシュボード画面の実装
- [ ] 統計データの取得・集計
- [ ] グラフ・チャートの表示
- [ ] グループ別進捗表示
- [ ] レポート自動生成機能
- [ ] 週次・月次レポートの出力

---

### 🟡 中優先度（品質向上）

#### 7. 待機リスト管理
**現状**: 待機リスト機能が未実装

**要求仕様**:
- 定員超過時の待機リスト登録
- キャンセル時の自動繰り上げ

**実装が必要な項目**:
- [ ] 定員チェック機能
- [ ] 待機リストへの自動登録
- [ ] キャンセル時の繰り上げ処理
- [ ] 待機リスト通知機能

#### 8. データ整合性チェック
**現状**: データ整合性チェックが不十分

**実装が必要な項目**:
- [ ] 同時予約時の競合処理
- [ ] データ整合性バリデーション
- [ ] エラー時のロールバック機能

#### 9. バックアップ・復元機能
**現状**: バックアップ機能が未実装

**実装が必要な項目**:
- [ ] 定期バックアップ機能
- [ ] データ復元機能
- [ ] バージョン管理

---

### 🟢 低優先度（将来拡張）

#### 10. レポート機能の拡張
- [ ] カスタムレポート作成
- [ ] エクスポート機能（PDF、Excel）
- [ ] レポートスケジュール設定

#### 11. 分析機能
- [ ] 学習進捗分析
- [ ] コース別受講率分析
- [ ] グループ別比較分析

---

## 📋 機能実装優先順位

### Phase 1: 基盤構築（現在進行中）
- [x] 基本予約機能
- [x] Web App骨格
- [x] 認証機能（Google Workspaceで自動認証 - `Session.getActiveUser()`）
- [ ] 管理者権限判定機能
- [ ] エラーハンドリング強化

### Phase 2: コア機能実装（次フェーズ）
1. **予約変更機能**（最優先）
   - 3日前制限・1回制限の実装
   - 変更UIの実装
2. **Google Calendar連携の強化**
   - 予約変更時のカレンダー更新
   - イベント削除処理
3. **メール通知機能**
   - 予約確認メール
   - リマインドメール

### Phase 3: テスト・採点機能（重要）
1. **テスト機能の実装**
   - テスト問題作成
   - テスト受験画面
   - 自動採点
2. **出席管理機能**
   - テスト回答と出席の紐付け
   - 出席率レポート

### Phase 4: 補講・管理機能
1. **補講管理機能**
   - 未受講者・不合格者の抽出
   - 補講スケジュール作成
2. **管理ダッシュボード**
   - 統計表示
   - レポート生成

---

## 🔄 既存システムとの統合

### 既存システム（Google Drive）で実装済み
- ✅ 予約フォーム（Google フォーム）
- ✅ カレンダー連携（自動ゲスト追加）
- ✅ Slackリマインド
- ✅ 履修状況管理（スプレッドシート）

### プロトタイプ（src/）で実装済み
- ✅ Web App骨格
- ✅ 基本予約機能
- ✅ マイページ

### 統合が必要な機能
1. **既存フォームとの連携**
   - プロトタイプのWebアプリと既存フォームの使い分け
   - または、既存フォームをWebアプリに統合

2. **既存データの移行**
   - スプレッドシートデータの移行
   - 履修状況の同期

---

## 📊 機能実装状況サマリー

| カテゴリ | 実装率 | 備考 |
|---------|--------|------|
| 研修管理 | 100% | 既存システムで実装済み |
| 予約管理（基本） | 80% | 予約変更機能が不足 |
| 出席管理 | 0% | 完全未実装 |
| テスト・採点 | 0% | 完全未実装 |
| 補講管理 | 0% | 完全未実装 |
| 通知機能 | 50% | Slackは実装済み、メールが不足 |
| 管理ダッシュボード | 30% | スプレッドシート版のみ |

**全体実装率**: 約40%

---

## 🎯 次のアクション

### 即座に実装すべき機能（Phase 1完了に必要）
1. ✅ 認証機能
2. ✅ エラーハンドリング強化
3. ⚠️ 予約変更機能（基本版）

### Phase 2で実装すべき機能
1. 予約変更機能（完全版）
2. メール通知機能
3. Google Calendar連携の強化

### Phase 3で実装すべき機能
1. テスト・採点機能
2. 出席管理機能

### Phase 4で実装すべき機能
1. 補講管理機能
2. 管理ダッシュボード（Webアプリ版）

---

**作成者**: プロダクト企画チーム  
**最終更新**: 2025-11-14

