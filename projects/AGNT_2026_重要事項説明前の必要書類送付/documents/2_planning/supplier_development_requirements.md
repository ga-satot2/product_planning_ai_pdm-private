# SUPPLIER開発チームへの展開要件

**作成日**: 2025-11-21  
**作成者**: t_sato2@ga-tech.co.jp  
**最終更新**: 2025-12-11（構成整理・重複排除・絵文字削除）

## 概要

本プロジェクト「AGNT 2026 重要事項説明前の必要書類送付」において、SUPPLIER開発チームに対応を依頼する事項をまとめます。
SUPからAGNTへの契約書情報連携のタイミングと仕様を確認し、SUP側の変更が必要となります。

プロジェクトの全体像は [プロジェクト概要書](./project_overview.md) を参照してください。

## SUPPLIER側で必要な変更内容

### 1. 契約書情報連携のタイミング

#### 1.1 連携タイミングの確認

- **確認事項**:
    - SUPからAGNTへの契約書情報連携のタイミング
    - 契約書類準備完了（`contract_preparation`）の状態遷移タイミング
- **確認先**: SUPPLIER開発チーム、Supply Chain事業部Process Managementチーム
- **期限**: 開発着手前（11/26まで推奨）

#### 1.2 連携API仕様

- **確認事項**:
    - SUPからAGNTへの契約書情報連携APIの仕様
    - `contract_preparation`状態の設定タイミング
    - APIリクエスト/レスポンスの仕様
- **確認先**: SUPPLIER開発チーム
- **期限**: 設計フェーズ開始前

**補足**: 契約書類準備完了だが送信不可のケースはないことはSCDに確認済みです。

### 2. サブリース契約書の格納場所（送信専用の箱）

#### 2.1 送信専用フォルダの用意

**決定事項**（2025-11-04会議）:
- **方針**: 送信専用のフォルダを用意する。
- **名称**: TBD（賃貸借契約書（サブリース）を使用する可能性あり）
- **運用**: 契約書が連携されて契約レディになった時点で、このフォルダ内のファイルをすべて送付する。
- **対象**: 本機能リリース以降、契約書レディになった案件。
- **ファイル選択**: 全件対象。

#### 2.2 開発要件

**SUPPLIER側の改修要件**:
- **フォルダ作成**: 新規でフォルダを作成するか、既存のフォルダを利用するかを決定する。
- **ファイル取得**: AGNT側がこのフォルダからファイルを取得できるようにする。

#### 2.3 既存のフォルダを使用する場合のリスク

既存のフォルダ（SUPの賃貸借契約書(サブリース契約書)）を使用する場合、AGNT側の改修は不要ですが、以下のリスクがあります。

1. **誤送付リスク**:
   - 過去のファイルが格納されている場合、誤って送信される可能性がある。
   - 送付対象のファイルと過去のファイルを区別する必要がある。

2. **SUP側のロジック修正**:
   - 発表時にサブリース物件だった場合は、ファイル格納されていないと発表不可というバリデーションがかかるため、修正が必要となる可能性がある。

#### 2.4 ファイル識別ロジック

- **識別ロジック**: 既存フォルダを使用する場合、送付対象となるファイルの明確な識別ロジック（格納日時、ステータスフラグなど）を定義する。
- **連携**: ロジック修正をSUP側と連携して徹底する。

### 3. サブリース契約書の送付タイミング

#### 3.1 送付タイミング

- **タイミング**: 契約書連携時（重要事項説明書と同じタイミング）。2025-11-12会議で決定。
- **送付内容**:
  - サブリース契約書（サブリースの場合）
  - 売買契約書の重要事項説明書
  - 賃貸借契約書の重要事項説明書
  - 賃貸管理契約の重要事項説明書

#### 3.2 例外ケース

- **サブリース契約書が先行する場合**: 一旦サブリース契約書のみを送付する（検討中）。
- **基本方針**: タイミングについては別途調整中。

### 4. サブリース判定ロジック

- **判定方法**: 「送信専用フォルダにファイルが存在する場合」を送付対象とする（ファイル存在ベース）。
- **理由**: 将来的な拡張性のため。

## 状態遷移の変更

- **確認事項**:
    - `contract_preparation`状態の設定タイミング
    - 既存の状態遷移ロジックへの影響
- **確認先**: SUPPLIER開発チーム
- **期限**: 設計フェーズ開始前

## 開発スケジュール調整

### SUPPLIER側の開発スケジュール

- **調整事項**:
    - SUPPLIER側の開発スケジュール
    - AGNT側とのスケジュール同期
    - 統合テストのスケジュール
- **確認先**: SUPPLIER開発チーム、AGNT開発チーム
- **期限**: プロジェクト開始時

### リリースタイミング

- **調整事項**:
    - SUP側とAGNT側のリリースタイミング
    - 段階的リリースの可能性
- **期限**: 設計フェーズ開始前

## リスク管理

1. **SUPPLIER開発チームへの展開遅延**:
   - SUP側の開発遅延がAGNT側に波及するリスク。早期連携で対策する。

2. **API仕様の不一致**:
   - 認識齟齬による手戻りリスク。仕様書の共有と確認を徹底する。

3. **サブリース契約書の誤送付**:
   - 過去ファイル誤送付のリスク。識別ロジックを厳格に定義する。

4. **バリデーションロジックとの不整合**:
   - 発表不可エラーの発生リスク。SUP側のロジック修正を確認する。

## 確認先・連絡先

### SUPPLIER開発チーム
- **確認内容**: 変更内容、API仕様、スケジュール、格納場所、識別ロジック、バリデーション。

### Supply Chain事業部 Process Managementチーム
- **確認内容**: 業務フロー、連携タイミング。

### Acquisition事業部 Contractチーム
- **確認内容**: 運用方針、ファイル整理タイミング。

## 次のアクション

### 即座に実行
1. **SUPPLIER開発チームへの連絡**: 変更内容確認、API仕様確認、スケジュール調整。
2. **Process Managementチームへの連絡**: 業務フロー確認。
3. **Contractチームへの連絡**: 運用方針確認。

### 設計フェーズ開始前
1. **API仕様書の共有**: 認識合わせ。
2. **スケジュール確定**: 統合テスト含む。
3. **識別ロジック定義**: 詳細詰め。

## 参考資料

- [プロジェクト概要書](./project_overview.md)
